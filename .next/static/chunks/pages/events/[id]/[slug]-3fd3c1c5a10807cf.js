(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{1712:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/[id]/[slug]",function(){return s(9643)}])},133:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var a=s(5893);s(7294);var r=s(9008),n=s.n(r),l={src:"/_next/static/media/fourfour.3bfc5379.svg",height:571,width:860},i=s(5675),c=s.n(i),o=s(1664),d=s.n(o);let u=()=>(0,a.jsxs)("div",{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:" 404 | EventAlia"}),(0,a.jsx)("meta",{name:"description",content:"An event ticketing system built with NextJS and Firebase"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:"w-full h-[100vh] flex flex-col space-y-4 items-center justify-center",children:[(0,a.jsx)(c(),{src:l,alt:"404 page",className:"w-[400px] mb-8"}),(0,a.jsx)("h2",{className:"text-xl text-[#C07F00]",children:"Seems we lost you! \uD83D\uDE2A"}),(0,a.jsx)(d(),{href:"/",className:"p-4 bg-slate-100 shadow-md hover:bg-[#C07F00] hover:text-slate-100 rounded-md",children:"Come back home \uD83C\uDFE0"})]})]});var h=u},6852:function(e,t,s){"use strict";var a=s(5893),r=s(7294),n=s(5434),l=s(8193),i=s(3750),c=s(1163),o=s(4855),d=s.n(o);let u=e=>{let{event:t,closeModal:s}=e,[o,u]=(0,r.useState)(!1),h=()=>u(!0),x=(0,c.useRouter)(),m=t.data?"https://eventtiz.vercel.app/register/".concat(t.id,"/").concat(t.data.slug):"https://eventtiz.vercel.app/register/".concat(x.query.id,"/").concat(t.slug);return(0,a.jsx)("div",{className:"w-full h-[100vh] dim absolute top-0 left-0 flex items-center justify-center p-4 z-40",children:(0,a.jsxs)("div",{className:"md:w-2/3 w-full bg-white h-[300px] flex items-center justify-center flex-col rounded-md shadow-[#FFD95A] shadow-md space-y-4 relative",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-[#b59a42]",children:"Share event "}),(0,a.jsxs)("div",{className:"w-max-content flex md:flex-row flex-col items-center space-x-3 p-3",children:[(0,a.jsx)("div",{className:"w-full border-[1px] md:mb-0 mb-4 p-2 rounded-md",children:(0,a.jsx)("p",{className:"text-gray-400 text-center link",children:m})}),o?(0,a.jsx)(i.Reu,{className:"text-2xl cursor-pointer text-green-500"}):(0,a.jsx)(d(),{onCopy:h,text:m,children:(0,a.jsx)(l.d7z,{className:"text-2xl cursor-pointer"})})]}),(0,a.jsx)(n.B4e,{className:"text-4xl text-[#C07F00] cursor-pointer hover:text-[#b59a42] top-3 absolute right-4",onClick:s})]})})};t.Z=u},9643:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return j},default:function(){return w}});var a=s(5893),r=s(7294),n=s(9008),l=s.n(n),i=s(1664),c=s.n(i),o=s(8193),d=s(3750),u=s(9521),h=s(4158),x=s(5434);let m=e=>{let{setDisableRegModal:t,setClick:s,updateRegLink:r,id:n}=e;return(0,a.jsx)("div",{className:"w-full h-[100vh] dim absolute top-0 left-0 flex items-center justify-center p-4 z-40",children:(0,a.jsxs)("div",{className:"md:w-[500px] w-full bg-white h-[300px] flex items-center justify-center flex-col rounded-md shadow-[#FFD95A] shadow-md space-y-4 relative ",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-center",children:"You want to disable event registration link?"}),(0,a.jsx)("p",{className:"text-center",children:"This action cannot be reversed."}),(0,a.jsx)("button",{className:"px-4 py-2 rounded-md shadow-md bg-green-500 hover:bg-orange-500 text-white ",onClick:()=>{r(n),s(!0),t(!1)},children:" Yes, Disable"}),(0,a.jsx)(x.B4e,{className:"text-4xl text-[#C07F00] cursor-pointer hover:text-[#b59a42] top-3 absolute right-4",onClick:()=>t(!1)})]})})},p=e=>{let{attendees:t,id:s,click:n,setClick:l,disableRegModal:i,setDisableRegModal:c}=e,[o,x]=(0,r.useState)(""),[p,f]=(0,r.useState)(t),g=r.useMemo(()=>p),v=r.useMemo(()=>[{Header:"Passcode",accessor:"passcode"},{Header:"Name",accessor:"name"},{Header:"Email",accessor:"email"}],[]),b=(0,u.useTable)({columns:v,data:g}),{getTableProps:j,getTableBodyProps:w,headerGroups:N,prepareRow:y,rows:C}=b,_=()=>{let e=p.filter(e=>e.passcode.startsWith(o));e.length>0&&""!==o&&f(e),""===o&&f(t)},D=e=>{e.preventDefault();let s=p.filter(e=>e.passcode.startsWith(o));s.length>0&&""!==o&&f(s),""===o&&f(t)};return(0,a.jsxs)("div",{className:" bg-white w-full p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold md:mb-auto mb-4",children:"List of Attendees"}),!n&&(0,a.jsx)("button",{className:"p-4 ".concat(n&&"hidden"," text-white rounded-md bg-[#C07F00]"),onClick:()=>c(!0),children:"Disable Registration"})]}),i&&(0,a.jsx)(m,{setDisableRegModal:c,setClick:l,updateRegLink:h.Hu,id:s}),(0,a.jsxs)("form",{className:"w-full flex items-center justify-center mb-6",onSubmit:D,children:[(0,a.jsx)("input",{type:"text",className:"border-[1px] w-[80%] rounded-lg py-2 px-4 mr-3",placeholder:"Search via Passcode",value:o,onChange:e=>{x(e.target.value),_()}}),(0,a.jsx)("button",{className:"border-[1px] p-3 rounded-full",children:(0,a.jsx)(d.dVI,{className:"text-2xl"})})]}),(0,a.jsx)("div",{className:"overflow-y-scroll max-h-[450px]",children:(0,a.jsxs)("table",{className:"relative",...j(),children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-white z-10",children:N.map(e=>(0,a.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map(e=>(0,a.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")}))}))}),(0,a.jsx)("tbody",{...w(),children:C.map(e=>(y(e),(0,a.jsx)("tr",{...e.getRowProps(),children:e.cells.map(e=>(0,a.jsx)("td",{...e.getCellProps(),children:e.render("Cell")}))})))})]})})]})};var f=s(1163),g=s(6852),v=s(133);let b=e=>{let{firebaseEvent:t}=e,[s,n]=(0,r.useState)(t.disableRegistration),[i,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),m=()=>u(!0),b=()=>u(!1),j=(0,f.useRouter)();return t.title?(0,a.jsxs)("div",{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"".concat(t.title," | EventTiz")}),(0,a.jsx)("meta",{name:"description",content:"An event ticketing system built with NextJS and Firebase"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:"relative w-full",children:[(0,a.jsxs)("div",{className:"h-[45vh] p-3 flex flex-col items-center justify-center bg-[#FFD95A] registergray w-full",children:[(0,a.jsx)("h2",{className:"text-4xl font-extrabold mb-4 text-center text-white",children:t.title}),t.attendees.length>0&&(0,a.jsxs)("p",{className:"text-xl font-extrabold mb-6 text-white",children:["Total Attendees:"," ",(0,a.jsx)("span",{className:"text-white",children:t.attendees.length})]})]}),(0,a.jsx)(p,{attendees:t.attendees,id:j.query.id,click:s,setClick:n,disableRegModal:h,setDisableRegModal:x}),(0,a.jsx)(c(),{href:"/dashboard",className:"absolute top-6 left-4 py-2 px-4",children:(0,a.jsx)(o.uME,{className:"text-4xl text-[#FFD95A]"})}),!s&&(0,a.jsx)(d.fRF,{className:" absolute top-6 right-10 cursor-pointer text-2xl text-[#FFD95A]",onClick:m}),i&&(0,a.jsx)(g.Z,{event:t,closeModal:b})]})]}):(0,a.jsx)(v.Z,{})};var j=!0,w=b},6375:function(e,t,s){"use strict";s.d(t,{I8:function(){return d},tO:function(){return c}});var a=s(3977),r=s(9828),n=s(1259),l=s(6845);let i=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyCiTxiWzxAOndzpeNyy3TuLeT9bxnM0ra4",authDomain:"eventtiz.firebaseapp.com",projectId:"eventtiz",storageBucket:"eventtiz.appspot.com",messagingSenderId:"600043838110",appId:"1:600043838110:web:8e094eec1f41d6c353f98f",measurementId:"G-25R0S4XSE6"}):(0,a.C6)()[0];new n.w9;let c=(0,l.cF)(i),o=(0,r.ad)(i),d=(0,n.v0)(i);t.ZP=o},4158:function(e,t,s){"use strict";s.d(t,{Bt:function(){return y},Hu:function(){return w},LR:function(){return g},LW:function(){return N},YZ:function(){return j},Zg:function(){return v},f1:function(){return f},uV:function(){return x},vw:function(){return b}});var a=s(1259),r=s(2920),n=s(774),l=s(6375),i=s(5247),c=s(19),o=s(3454);let d=(e,t,s,a,r,n,l,c,d,u,h)=>{i.ZP.send(o.env.NEXT_PUBLIC_SERVICE_ID,o.env.NEXT_PUBLIC_TEMPLATE_ID,{name:e,email:t,title:s,time:j(a),date:r,note:n,description:l,passcode:c,flier_url:d},o.env.NEXT_PUBLIC_API_KEY).then(e=>{h(!1),u(!0)},e=>{alert(e.text)})},u=()=>Math.random().toString(36).substring(2,10),h=e=>{let t=e.toLowerCase().trim();return(t=t.replace(/[^a-z0-9]+/g,"-")).replace(/^-+|-+$/g,"")},x=async(e,t,s,a,r,i,o,d,u)=>{let x=await (0,c.ET)((0,c.hJ)(l.ZP,"events"),{user_id:e,title:t,date:s,time:a,venue:r,description:i,note:o,slug:h(t),attendees:[],disableRegistration:!1}),p=(0,n.iH)(l.tO,"events/".concat(x.id,"/image"));null!==d?await (0,n.sf)(p,d,"data_url").then(async()=>{let e=await (0,n.Jt)(p);await (0,c.r7)((0,c.JU)(l.ZP,"events",x.id),{flier_url:e}),m("Event created! \uD83C\uDF89"),u.push("/dashboard")}):(m("Event created! \uD83C\uDF89"),u.push("/dashboard"))},m=e=>{r.Am.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},p=e=>{r.Am.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},f=(e,t,s)=>{(0,a.Xb)(l.I8,e,t).then(e=>{e.user,m("Account created \uD83C\uDF89"),s.push("/login")}).catch(e=>{console.error(e),p("Account creation declined ❌")})},g=(e,t,s)=>{(0,a.e5)(l.I8,e,t).then(e=>{e.user,m("Authentication successful \uD83C\uDF89"),s.push("/dashboard")}).catch(e=>{console.error(e),p("Incorrect Email/Password ❌")})},v=e=>{(0,a.w7)(l.I8).then(()=>{m("Logout successful! \uD83C\uDF89"),e.push("/")}).catch(e=>{p("Couldn't sign out ❌")})},b=(e,t,s)=>{try{let a=(0,c.IO)((0,c.hJ)(l.ZP,"events"),(0,c.ar)("user_id","==",e)),r=(0,c.cf)(a,e=>{let a=[];return e.forEach(e=>{a.push({data:e.data(),id:e.id})}),t(a),s(!1),()=>r()})}catch(n){console.error(n)}},j=e=>{let[t,s]=e.split(":").map(Number),a="".concat((t%12||12).toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"));return"".concat(a).concat(t>=12?"pm":"am")},w=async e=>{let t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),s=(0,c.JU)(l.ZP,"events",e);(0,c.r7)(s,{disableRegistration:!0,slug:"expired-".concat(t)})},N=async(e,t,s,a,r)=>{r(!0);let n=u(),i=(0,c.JU)(l.ZP,"events",s),o=await (0,c.QT)(i),h={};if(o.exists()){h=o.data();let x=h.attendees,m=x.filter(e=>e.email===t);if(0===m.length&&!1===h.disableRegistration){await (0,c.r7)(i,{attendees:(0,c.vr)({name:e,email:t,passcode:n})});let f=h.flier_url?h.flier_url:"No flier for this event";d(e,t,h.title,h.time,h.date,h.note,h.description,n,f,a,r)}else r(!1),p("User already registered ❌")}},y=async e=>{await (0,c.oe)((0,c.JU)(l.ZP,"events",e));let t=(0,n.iH)(l.tO,"events/".concat(e,"/image"));(0,n.oq)(t).then(()=>{console.log("Deleted successfully")}).catch(e=>{console.error("Image does not exist")})}}},function(e){e.O(0,[16,677,228,617,13,831,667,675,975,774,888,179],function(){return e(e.s=1712)}),_N_E=e.O()}]);